{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Noufel\\\\Documents\\\\Codifix\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { io } from \"socket.io-client\";\nimport { EditorState } from \"@codemirror/state\";\nimport { EditorView, basicSetup } from \"codemirror\";\nimport { javascript } from \"@codemirror/lang-javascript\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const editorRef = useRef(null);\n  const [socket, setSocket] = useState(null);\n  const [view, setView] = useState(null);\n  useEffect(() => {\n    const newSocket = io(\"http://localhost:5000\");\n    setSocket(newSocket);\n    newSocket.on(\"codeUpdate\", updatedCode => {\n      if (view) {\n        view.dispatch({\n          changes: {\n            from: 0,\n            to: view.state.doc.length,\n            insert: updatedCode\n          }\n        });\n      }\n    });\n    return () => newSocket.disconnect();\n  }, [view]);\n  useEffect(() => {\n    if (editorRef.current && !view) {\n      const startState = EditorState.create({\n        doc: \"\",\n        extensions: [basicSetup, javascript(), EditorView.updateListener.of(update => {\n          if (update.docChanged) {\n            const code = update.state.doc.toString();\n            if (socket) socket.emit(\"codeChange\", code);\n          }\n        })]\n      });\n      const newView = new EditorView({\n        state: startState,\n        parent: editorRef.current\n      });\n      setView(newView);\n    }\n  }, [editorRef, view, socket]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Codifix\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: editorRef,\n      style: {\n        border: \"1px solid #ccc\",\n        height: \"500px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"ihrzxGT0mlNs2PFjZHRwSnGiFyM=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useRef","useState","io","EditorState","EditorView","basicSetup","javascript","jsxDEV","_jsxDEV","App","_s","editorRef","socket","setSocket","view","setView","newSocket","on","updatedCode","dispatch","changes","from","to","state","doc","length","insert","disconnect","current","startState","create","extensions","updateListener","of","update","docChanged","code","toString","emit","newView","parent","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","style","border","height","_c","$RefreshReg$"],"sources":["C:/Users/Noufel/Documents/Codifix/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { io } from \"socket.io-client\";\r\nimport { EditorState } from \"@codemirror/state\";\r\nimport { EditorView, basicSetup } from \"codemirror\";\r\nimport { javascript } from \"@codemirror/lang-javascript\";\r\n\r\nfunction App() {\r\n  const editorRef = useRef(null);\r\n  const [socket, setSocket] = useState(null);\r\n  const [view, setView] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const newSocket = io(\"http://localhost:5000\");\r\n    setSocket(newSocket);\r\n\r\n    newSocket.on(\"codeUpdate\", (updatedCode) => {\r\n      if (view) {\r\n        view.dispatch({\r\n          changes: { from: 0, to: view.state.doc.length, insert: updatedCode }\r\n        });\r\n      }\r\n    });\r\n\r\n    return () => newSocket.disconnect();\r\n  }, [view]);\r\n\r\n  useEffect(() => {\r\n    if (editorRef.current && !view) {\r\n      const startState = EditorState.create({\r\n        doc: \"\",\r\n        extensions: [\r\n          basicSetup,\r\n          javascript(),\r\n          EditorView.updateListener.of((update) => {\r\n            if (update.docChanged) {\r\n              const code = update.state.doc.toString();\r\n              if (socket) socket.emit(\"codeChange\", code);\r\n            }\r\n          })\r\n        ]\r\n      });\r\n\r\n      const newView = new EditorView({\r\n        state: startState,\r\n        parent: editorRef.current\r\n      });\r\n\r\n      setView(newView);\r\n    }\r\n  }, [editorRef, view, socket]);\r\n\r\n  return (\r\n    <div>\r\n      <h1>Codifix</h1>\r\n      <div ref={editorRef} style={{ border: \"1px solid #ccc\", height: \"500px\" }}></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,SAASC,EAAE,QAAQ,kBAAkB;AACrC,SAASC,WAAW,QAAQ,mBAAmB;AAC/C,SAASC,UAAU,EAAEC,UAAU,QAAQ,YAAY;AACnD,SAASC,UAAU,QAAQ,6BAA6B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzD,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAMC,SAAS,GAAGX,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAM,CAACY,MAAM,EAAEC,SAAS,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACa,IAAI,EAAEC,OAAO,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EAEtCF,SAAS,CAAC,MAAM;IACd,MAAMiB,SAAS,GAAGd,EAAE,CAAC,uBAAuB,CAAC;IAC7CW,SAAS,CAACG,SAAS,CAAC;IAEpBA,SAAS,CAACC,EAAE,CAAC,YAAY,EAAGC,WAAW,IAAK;MAC1C,IAAIJ,IAAI,EAAE;QACRA,IAAI,CAACK,QAAQ,CAAC;UACZC,OAAO,EAAE;YAAEC,IAAI,EAAE,CAAC;YAAEC,EAAE,EAAER,IAAI,CAACS,KAAK,CAACC,GAAG,CAACC,MAAM;YAAEC,MAAM,EAAER;UAAY;QACrE,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;IAEF,OAAO,MAAMF,SAAS,CAACW,UAAU,CAAC,CAAC;EACrC,CAAC,EAAE,CAACb,IAAI,CAAC,CAAC;EAEVf,SAAS,CAAC,MAAM;IACd,IAAIY,SAAS,CAACiB,OAAO,IAAI,CAACd,IAAI,EAAE;MAC9B,MAAMe,UAAU,GAAG1B,WAAW,CAAC2B,MAAM,CAAC;QACpCN,GAAG,EAAE,EAAE;QACPO,UAAU,EAAE,CACV1B,UAAU,EACVC,UAAU,CAAC,CAAC,EACZF,UAAU,CAAC4B,cAAc,CAACC,EAAE,CAAEC,MAAM,IAAK;UACvC,IAAIA,MAAM,CAACC,UAAU,EAAE;YACrB,MAAMC,IAAI,GAAGF,MAAM,CAACX,KAAK,CAACC,GAAG,CAACa,QAAQ,CAAC,CAAC;YACxC,IAAIzB,MAAM,EAAEA,MAAM,CAAC0B,IAAI,CAAC,YAAY,EAAEF,IAAI,CAAC;UAC7C;QACF,CAAC,CAAC;MAEN,CAAC,CAAC;MAEF,MAAMG,OAAO,GAAG,IAAInC,UAAU,CAAC;QAC7BmB,KAAK,EAAEM,UAAU;QACjBW,MAAM,EAAE7B,SAAS,CAACiB;MACpB,CAAC,CAAC;MAEFb,OAAO,CAACwB,OAAO,CAAC;IAClB;EACF,CAAC,EAAE,CAAC5B,SAAS,EAAEG,IAAI,EAAEF,MAAM,CAAC,CAAC;EAE7B,oBACEJ,OAAA;IAAAiC,QAAA,gBACEjC,OAAA;MAAAiC,QAAA,EAAI;IAAO;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAChBrC,OAAA;MAAKsC,GAAG,EAAEnC,SAAU;MAACoC,KAAK,EAAE;QAAEC,MAAM,EAAE,gBAAgB;QAAEC,MAAM,EAAE;MAAQ;IAAE;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC9E,CAAC;AAEV;AAACnC,EAAA,CAnDQD,GAAG;AAAAyC,EAAA,GAAHzC,GAAG;AAqDZ,eAAeA,GAAG;AAAC,IAAAyC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}